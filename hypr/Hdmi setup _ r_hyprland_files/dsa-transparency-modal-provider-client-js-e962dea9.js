import"./dsa-transparency-modal-358ac552.js";import{_ as s,n as t,w as a,h as e,s as r,x as i,f as o}from"./icon-ada4cc58.js";import{t as n,l as d,ar as p,bA as c,$ as l,k as h}from"./shell-9a3ad68e.js";import"./faceplate-modal-71a626e6.js";import"./faceplate-bottom-sheet-fe8741d1.js";import"./TinyGesture-6f7cc1aa.js";let y=class extends r{constructor(){super(),this.postId="",this.impressionId="",this.pubsub=new d(this),this._activateFeature=async s=>p(s),this.initDsaTransparencyModal=async s=>{this.target=s.target,this.postId=s.postId,this.adUserTargetingInfo=s.adUserTargetingInfo,this.impressionId=s.impressionId;const{gender:t,interests:a,locations:e,targetingCriteria:r}=this.adUserTargetingInfo,i={};t&&(i.gender=`${t}`),a&&a.length>0&&(i.interests=`${a.toString()}`),e&&e.length>0&&(i.locations=`${e.join("-")}`),r&&r.length>0&&(i.targeting_criteria=`${r.toString()}`),await this._activateFeature({name:c,queryParams:{post_id:this.postId,impression_id:this.impressionId,is_desktop:!!this.isDesktop,...i},renderMode:l.Contents});const o=this.querySelector("dsa-transparency-modal");o&&o.initModal()},this.closeDsaTransparencyModal=async()=>{await(this.dsaTransparencyModal?.updateComplete),this.target?.focus()},this.addEventListener("dsa-transparency-modal-close",this.closeDsaTransparencyModal)}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(h.DsaTransparencyModal,this.initDsaTransparencyModal,!1)}disconnectedCallback(){this.pubsub.unsubscribe(h.DsaTransparencyModal,this.initDsaTransparencyModal),super.disconnectedCallback()}render(){return i`<slot></slot>`}};y.styles=[n],s([t({type:Boolean,attribute:"is-desktop"})],y.prototype,"isDesktop",void 0),s([a("dsa-transparency-modal")],y.prototype,"dsaTransparencyModal",void 0),s([e()],y.prototype,"postId",void 0),s([e()],y.prototype,"impressionId",void 0),s([e()],y.prototype,"adUserTargetingInfo",void 0),y=s([o("dsa-transparency-modal-provider")],y);
//# sourceMappingURL=dsa-transparency-modal-provider-client-js-e962dea9.js.map
